<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PlayGround ‚Äî Tournament Platform</title>
  <style>
    /* ---------- Basic Reset & Variables ---------- */
    :root{
      --bg:#0f1724; --card:#fff; --accent:#f4b400; --muted:#666;
      --container:1100px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter, system-ui, Arial, sans-serif;
      background:linear-gradient(180deg,#07112a 0%, #0b1a33 100%);
      color:#111;
      -webkit-font-smoothing:antialiased;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:var(--container);margin:0 auto;padding:0 16px}

    /* ---------- Header ---------- */
    header{background:#000; color:#fff; position:sticky; top:0; z-index:50; border-bottom:4px solid var(--accent)}
    .header-inner{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .logo{font-weight:700;color:var(--accent);font-size:1.25rem}
    nav ul{display:flex;gap:12px;align-items:center;margin:0;padding:0;list-style:none}
    nav a{color:#fff;padding:8px 10px;border-radius:6px}
    nav a.active, nav a:hover{background:rgba(255,255,255,0.07)}

    .auth-buttons .btn{margin-left:8px}
    .btn{cursor:pointer;padding:8px 12px;border-radius:8px;border:1px solid transparent;background:var(--card);color:#111}
    .btn-primary{background:var(--accent);color:#000;font-weight:600}
    .btn-outline{background:transparent;border:1px solid #fff;color:#fff}

    /* ---------- Pages ---------- */
    .page{display:none;padding:36px 0}
    .page.active{display:block}

    /* Hero */
    .hero{background-image:linear-gradient(rgba(7,17,34,0.6), rgba(7,17,34,0.6)), url('https://images.unsplash.com/photo-1552664730-d307ca884978?auto=format&fit=crop&w=1400&q=80');background-size:cover;background-position:center;border-radius:10px;padding:36px;color:#fff;text-align:center}
    .hero h1{margin:8px 0;font-size:2rem}
    .hero p{color:#f0f6ff;margin-bottom:16px}

    /* Services Cards */
    .services-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-top:20px}
    .card{background:#fff;border-radius:10px;padding:18px;box-shadow:0 6px 18px rgba(2,6,23,0.45)}
    .service-icon{font-size:2rem}

    /* Team */
    .team-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
    .team-card{text-align:center;padding:12px;background:#fff;border-radius:12px}
    .team-card img{width:160px;height:260px;border-radius:5px;object-fit:cover;margin:0 auto 10px;display:block;}

    /* Tournaments */
    .tournaments-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
    .tournament-item{padding:14px;background:#fff;border-radius:10px}

    /* Forms */
    form .form-group{margin-bottom:12px}
    label{display:block;margin-bottom:6px;font-weight:600}
    input[type="text"],input[type="email"],input[type="password"],select,textarea,input[type="number"],input[type="date"]{
      width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;font-size:0.95rem
    }

    /* Footer */
    footer{color:#fff;padding:24px 0;background:#07112a;margin-top:30px}
    .footer-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px}

    /* Dashboard layout */
    .dashboard{display:grid;grid-template-columns:260px 1fr;gap:16px}
    .dash-nav{background:#fff;padding:12px;border-radius:8px;height:fit-content}
    .dash-nav button{display:block;width:100%;text-align:left;margin-bottom:8px;padding:10px;border-radius:6px;border:0;background:transparent}
    .dash-content .card{background:#fff;padding:14px}

    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.55);display:none;align-items:center;justify-content:center;z-index:200}
    .modal-backdrop.active{display:flex}
    .modal{width:100%;max-width:480px;background:#fff;padding:18px;border-radius:10px}

    /* responsive */
    @media (max-width:900px){
      .dashboard{grid-template-columns:1fr}
      nav ul{display:none}
      .hamburger{display:block}
    }
    @media (min-width:901px){
      .hamburger{display:none}
    }

    /* small helpers */
    .muted{color:var(--muted);font-size:0.95rem}
    .flex{display:flex;gap:12px;align-items:center}
    .center{text-align:center}
    .mb-12{margin-bottom:12px}
  </style>
</head>
<body>
  <header>
    <div class="container header-inner">
      <div class="logo" id="homeLogo" role="button">PlayGround</div>
      <nav>
        <ul id="navList">
          <li><a class="nav-link active" data-page="home">Home</a></li>
          <li><a class="nav-link" data-page="services">Services</a></li>
          <li><a class="nav-link" data-page="team">Our Team</a></li>
          <li><a class="nav-link" data-page="tournaments">Tournaments</a></li>
          <li><a class="nav-link" data-page="about">About</a></li>
          <li><a class="nav-link" data-page="contact">Contact</a></li>
        </ul>
      </nav>
      <div style="display:flex;align-items:center;gap:8px">
        <div class="auth-buttons" id="authButtons">
          <button class="btn btn-outline" id="loginBtn">Login</button>
          <button class="btn btn-primary" id="signupBtn">Sign Up</button>
        </div>
        <div class="user-info" id="userInfo" style="display:none;color:#fff">
          <span id="userGreeting" class="muted"></span>
          <button class="btn" id="logoutBtn">Logout</button>
        </div>
        <div class="hamburger" style="color:#fff;cursor:pointer" id="hamb">‚ò∞</div>
      </div>
    </div>
  </header>

  <!-- HOME -->
  <main class="container">
    <section class="page active" id="home">
      <div class="hero">
        <h1>Welcome to PlayGround</h1>
        <p>Your platform for discovering & participating in sports tournaments near you.</p>
        <div style="display:flex;gap:10px;justify-content:center">
          <button class="btn btn-primary" id="exploreBtn">Explore Tournaments</button>
          <button class="btn btn-outline" id="learnBtn">Learn More</button>
        </div>
      </div>

      <section style="margin-top:26px">
        <div class="section-title">
          <h2 style="color:#fff">Our Services</h2>
          <p class="muted">What we provide for players and organizers</p>
        </div>
        <div class="services-grid" style="margin-top:12px">
          <div class="card service-card">
            <div class="service-icon">üèÜ</div><h3>Publish Tournaments</h3>
            <p class="muted">Organizers can publish tournaments and manage participants.</p>
          </div>
          <div class="card service-card">
            <div class="service-icon">üìÖ</div><h3>Upcoming Tournaments</h3>
            <p class="muted">View local tournaments and register easily.</p>
          </div>
          <div class="card service-card">
            <div class="service-icon">üí∞</div><h3>Win Prizes</h3>
            <p class="muted">Compete and win prizes and certificates.</p>
          </div>
          <div class="card service-card">
            <div class="service-icon">üìú</div><h3>Certification</h3>
            <p class="muted">Download participation certificates after events.</p>
          </div>
        </div>
      </section>
    </section>

    <!-- SERVICES (same content as above page target) -->
    <section class="page" id="services">
      <div class="card">
        <h2>Services</h2>
        <p class="muted">Full list of services offered by PlayGround.</p>
        <div class="services-grid" style="margin-top:12px">
          <div class="card"> <h3>Publish Tournaments</h3><p class="muted">Organizers can publish events & manage participants</p></div>
          <div class="card"> <h3>Upcoming Tournaments</h3><p class="muted">Browse & register</p></div>
          <div class="card"> <h3>Win Prizes</h3><p class="muted">Prizes & trophies for winners</p></div>
          <div class="card"> <h3>Certification</h3><p class="muted">Download certificates</p></div>
        </div>
      </div>
    </section> 

    <!-- TEAM -->
    <section class="page" id="team">
      <div class="card">
        <h2>Our Team</h2>
        <p class="muted">Meet the developers behind PlayGround</p>
        <div class="team-grid" style="margin-top:12px">
          <div class="team-card">
            <img src="jy.jpeg" alt="Jyoti" onerror="this.src='https://via.placeholder.com/140'"/>
            <h3>Jyoti</h3>
            <p class="muted">Developer </p>
            <p class="muted">BCA Student</p>
            <p class="muted">MIMIT,Malout</p>
          </div>
          <div class="team-card">
            <img src="lachhmi1.jpeg" alt="Lachhmi" onerror="this.src='https://via.placeholder.com/140' "/>
            <h3>Lachhmi</h3>
            <p class="muted">Developer</p>
            <p class="muted">BCA Student</p>
            <p class="muted">MIMIT,Malout</p>
           
          </div>
        </div>
      </div>
    </section>

    <!-- TOURNAMENTS -->
    <section class="page" id="tournaments">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px">
        <h2 style="color:#fff">Tournaments</h2>
        <div>
          <button class="btn btn-primary" id="btnCreateTournament">Create Tournament</button>
        </div>
      </div>

      <div id="tournamentsContainer" class="tournaments-grid"></div>
    </section>

    <!-- ABOUT -->
    <section class="page" id="about">
      <div class="card">
        <h2>About PlayGround</h2>
        <p class="muted">PlayGround is a student project to connect players and organizers for local tournaments. Built with HTML, CSS, JS and uses the browser localStorage to simulate logins, tournament management and registration.</p>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="page" id="contact">
      <div class="card">
        <h2>Contact Us</h2>
        <form id="contactForm">
          <div class="form-group">
            <label for="contactName">Name</label>
            <input id="contactName" required />
          </div>
          <div class="form-group">
            <label for="contactEmail">Email</label>
            <input type="email" id="contactEmail" required />
          </div>
          <div class="form-group">
            <label for="contactMessage">Message</label>
            <textarea id="contactMessage" rows="4" required></textarea>
          </div>
          <div class="flex">
            <button type="submit" class="btn btn-primary">Send Message</button>
            <button type="reset" class="btn btn-outline">Clear</button>
          </div>
        </form>
      </div>
    </section>

    <!-- PLAYER DASHBOARD -->
    <section class="page" id="playerDashboard">
      <div class="card">
        <h2>Player Dashboard</h2>
        <p id="playerWelcome" class="muted"></p>
        <div style="margin-top:12px" id="playerTourneyList"></div>
        <div style="margin-top:12px" id="playerCerts"></div>
      </div>
    </section>

    <!-- ORGANIZER DASHBOARD -->
    <section class="page" id="organizerDashboard">
      <div class="card">
        <h2>Organizer Dashboard</h2>
        <p id="orgWelcome" class="muted"></p>
        <h3 style="margin-top:12px">Publish Tournament</h3>
        <form id="createTournamentForm">
          <div class="form-group">
            <label>Tournament Name</label>
            <input id="tName" required />
          </div>
          <div class="form-group">
            <label>Game</label>
            <input id="tGame" required />
          </div>
          <div class="form-group">
            <label>Date</label>
            <input id="tDate" type="date" required />
          </div>
          <div class="form-group">
            <label>Location</label>
            <input id="tLocation" required />
          </div>
          <div class="form-group">
            <label>Entry Fee (‚Çπ)</label>
            <input id="tFee" type="number" value="0" required />
          </div>
          <div class="flex">
            <button class="btn btn-primary" type="submit">Publish</button>
            <button type="button" class="btn btn-outline" id="orgRefresh">Refresh</button>
          </div>
        </form>

        <h3 style="margin-top:18px">Your Tournaments</h3>
        <div id="organizerTournamentsList"></div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div style="display:flex;gap:16px;flex-wrap:wrap;justify-content:space-between;align-items:center">
        <div>
          <h3 style="color:var(--accent)">PlayGround</h3>
          <p class="muted">Connect. Compete. Celebrate.</p>
        </div>
        <div class="muted">¬© 2025 PlayGround Inc</div>
      </div>
    </div>
  </footer>

  <!-- Modal: Login / Signup -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal" role="dialog" aria-modal="true">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h3 id="modalTitle">Sign Up</h3>
        <button id="closeModal" class="btn">‚úï</button>
      </div>

      <!-- SignUp -->
      <form id="signupForm" style="display:block">
        <div class="form-group"><label>Name</label><input id="suName" required></div>
        <div class="form-group"><label>Email</label><input id="suEmail" type="email" required></div>
        <div class="form-group"><label>Password</label><input id="suPass" type="password" required></div>
        <div class="form-group"><label>User Type</label>
          <select id="suType">
            <option value="player">Player</option>
            <option value="organizer">Organizer</option>
            <option value="admin">Admin</option>
          </select>
        </div>
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button type="submit" class="btn btn-primary">Create Account</button>
          <button type="button" id="showLogin" class="btn btn-outline">Have account? Login</button>
        </div>
        <p id="signupMsg" class="muted" style="margin-top:8px"></p>
      </form>

      <!-- Login -->
      <form id="loginFormModal" style="display:none">
        <div class="form-group"><label>Email</label><input id="liEmail" type="email" required></div>
        <div class="form-group"><label>Password</label><input id="liPass" type="password" required></div>
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button type="submit" class="btn btn-primary">Login</button>
          <button type="button" id="showSignup" class="btn btn-outline">Create Account</button>
        </div>
        <p id="loginMsg" class="muted" style="margin-top:8px"></p>
      </form>
    </div>
  </div>

  <script>
    /* ---------- Utility & App State ---------- */
    const pages = document.querySelectorAll('.page');
    const navLinks = document.querySelectorAll('.nav-link');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const signupForm = document.getElementById('signupForm');
    const loginFormModal = document.getElementById('loginFormModal');
    const authButtons = document.getElementById('authButtons');
    const userInfo = document.getElementById('userInfo');
    const userGreeting = document.getElementById('userGreeting');
    const logoutBtn = document.getElementById('logoutBtn');
    const loginBtn = document.getElementById('loginBtn');
    const signupBtn = document.getElementById('signupBtn');
    const closeModalBtn = document.getElementById('closeModal');
    const showLogin = document.getElementById('showLogin');
    const showSignup = document.getElementById('showSignup');
    const modalTitle = document.getElementById('modalTitle');

    // Data keys in localStorage
    const USERS_KEY = 'pg_users_v1';
    const TOURN_KEY = 'pg_tournaments_v1';
    const REG_KEY = 'pg_registrations_v1';

    // Helper: get / set
    const getUsers = () => JSON.parse(localStorage.getItem(USERS_KEY) || '[]');
    const setUsers = (u) => localStorage.setItem(USERS_KEY, JSON.stringify(u));
    const getTournaments = () => JSON.parse(localStorage.getItem(TOURN_KEY) || '[]');
    const setTournaments = (t) => localStorage.setItem(TOURN_KEY, JSON.stringify(t));
    const getRegs = () => JSON.parse(localStorage.getItem(REG_KEY) || '[]');
    const setRegs = (r) => localStorage.setItem(REG_KEY, JSON.stringify(r));

    let currentUser = JSON.parse(sessionStorage.getItem('pg_current')) || null;
    const setCurrent = (u) => {
      currentUser = u;
      if(u) sessionStorage.setItem('pg_current', JSON.stringify(u)); else sessionStorage.removeItem('pg_current');
      refreshAuthUI();
    };

    /* ---------- Navigation ---------- */
    function showPage(id){
      pages.forEach(p => p.id === id ? p.classList.add('active') : p.classList.remove('active'));
      navLinks.forEach(a => a.dataset.page === id ? a.classList.add('active') : a.classList.remove('active'));
      window.scrollTo(0,0);
      if(id==='tournaments') renderTournaments();
      if(id==='playerDashboard') renderPlayerDashboard();
      if(id==='organizerDashboard') renderOrganizerDashboard();
    }
    navLinks.forEach(a => a.addEventListener('click', ()=> showPage(a.dataset.page)));
    document.getElementById('exploreBtn').addEventListener('click', ()=> showPage('tournaments'));
    document.getElementById('learnBtn').addEventListener('click', ()=> showPage('about'));
    document.getElementById('homeLogo').addEventListener('click', ()=> showPage('home'));

    /* ---------- Modal / Auth UI ---------- */
    function openModal(type='signup'){
      modalBackdrop.classList.add('active');
      if(type==='signup'){ signupForm.style.display='block'; loginFormModal.style.display='none'; modalTitle.innerText='Sign Up'; }
      else { signupForm.style.display='none'; loginFormModal.style.display='block'; modalTitle.innerText='Login'; }
    }
    function closeModal(){ modalBackdrop.classList.remove('active'); }

    signupBtn.addEventListener('click', ()=> openModal('signup'));
    loginBtn.addEventListener('click', ()=> openModal('login'));
    closeModalBtn.addEventListener('click', closeModal);
    showLogin.addEventListener('click', ()=> openModal('login'));
    showSignup.addEventListener('click', ()=> openModal('signup'));
    modalBackdrop.addEventListener('click', (e)=> { if(e.target === modalBackdrop) closeModal(); });

    /* ---------- Signup & Login (localStorage) ---------- */
    signupForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const name = document.getElementById('suName').value.trim();
      const email = document.getElementById('suEmail').value.trim().toLowerCase();
      const pass = document.getElementById('suPass').value;
      const type = document.getElementById('suType').value;
      const users = getUsers();
      if(users.some(u => u.email === email)){ document.getElementById('signupMsg').innerText = 'Email already registered'; return; }
      const newUser = { id: Date.now(), name, email, pass, type };
      users.push(newUser);
      setUsers(users);
      document.getElementById('signupMsg').innerText = 'Account created. You can login now.';
      // auto-login
      setCurrent({ id:newUser.id, name:newUser.name, email:newUser.email, type:newUser.type});
      closeModal();
      // redirect
      if(newUser.type === 'player') showPage('playerDashboard'); else showPage(newUser.type==='organizer' ? 'organizerDashboard' : 'organizerDashboard');
    });

    loginFormModal.addEventListener('submit', (e)=>{
      e.preventDefault();
      const email = document.getElementById('liEmail').value.trim().toLowerCase();
      const pass = document.getElementById('liPass').value;
      const users = getUsers();
      const found = users.find(u => u.email === email && u.pass === pass);
      if(!found){ document.getElementById('loginMsg').innerText = 'Invalid credentials'; return; }
      setCurrent({ id:found.id, name:found.name, email:found.email, type:found.type });
      document.getElementById('loginMsg').innerText = '';
      closeModal();
      if(found.type === 'player') showPage('playerDashboard'); else showPage('organizerDashboard');
    });

    logoutBtn.addEventListener('click', ()=>{
      setCurrent(null);
      showPage('home');
    });

    function refreshAuthUI(){
      if(currentUser){
        authButtons.style.display='none';
        userInfo.style.display='flex';
        userGreeting.innerText = `Hi, ${currentUser.name} (${currentUser.type})`;
      } else {
        authButtons.style.display='flex';
        userInfo.style.display='none';
      }
    }
    refreshAuthUI();

    /* ---------- Tournaments Rendering & Actions ---------- */
    function renderTournaments(){
      const container = document.getElementById('tournamentsContainer');
      const tournaments = getTournaments();
      if(tournaments.length === 0){
        container.innerHTML = `<div class="card">No tournaments yet. ${currentUser && currentUser.type==='organizer' ? 'Create one from your dashboard.' : ''}</div>`;
        return;
      }
      container.innerHTML = tournaments.map(t => `
        <div class="tournament-item card">
          <h3>${escapeHtml(t.name)}</h3>
          <p class="muted"><strong>Game:</strong> ${escapeHtml(t.game)} ‚Ä¢ <strong>Date:</strong> ${t.date} ‚Ä¢ <strong>Location:</strong> ${escapeHtml(t.location)}</p>
          <p class="muted"><strong>Fee:</strong> ‚Çπ${t.fee}</p>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn btn-primary" onclick="registerFor(${t.id})">Register</button>
            <button class="btn btn-outline" onclick="viewParticipants(${t.id})">Participants</button>
            <button class="btn" onclick="downloadCert(${t.id})">Certificate</button>
          </div>
        </div>
      `).join('');
    }

    // helper: escape
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, (m)=> ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    // register
    window.registerFor = function(tid){
      if(!currentUser){ openModal('login'); return; }
      if(currentUser.type !== 'player'){ alert('Only players can register.'); return; }
      const regs = getRegs();
      if(regs.some(r=> r.tid===tid && r.userId===currentUser.id)){ alert('You already registered.'); return; }
      regs.push({ tid, userId: currentUser.id, regDate: new Date().toISOString() });
      setRegs(regs);
      alert('Registered successfully!');
      renderPlayerDashboard();
    };

    // view participants (organizer/admin)
    window.viewParticipants = function(tid){
      const regs = getRegs();
      const users = getUsers();
      const participants = regs.filter(r => r.tid === tid).map(r => users.find(u => u.id === r.userId)?.name || 'Unknown');
      if(participants.length===0){ alert('No participants yet'); return; }
      alert('Participants:\\n' + participants.join('\\n'));
    };

    // download placeholder certificate
    window.downloadCert = function(tid){
      if(!currentUser){ openModal('login'); return; }
      const regs = getRegs();
      const r = regs.find(rr => rr.tid===tid && rr.userId===currentUser.id);
      if(!r){ alert('You are not registered for this tournament'); return; }
      // Simulate certificate download by creating simple text file
      const tournaments = getTournaments();
      const t = tournaments.find(x => x.id===tid);
      const txt = `Certificate of Participation\\nName: ${currentUser.name}\\nTournament: ${t.name}\\nDate: ${t.date}`;
      const blob = new Blob([txt], {type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = `Certificate_${t.name.replace(/\\s+/g,'_')}.txt`;
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    };

    /* ---------- Organizer: Create Tournament ---------- */
    const createForm = document.getElementById('createTournamentForm');
    createForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      if(!currentUser || (currentUser.type !== 'organizer' && currentUser.type !== 'admin')){ alert('Only organizers/admins can create tournaments.'); return; }
      const name = document.getElementById('tName').value.trim();
      const game = document.getElementById('tGame').value.trim();
      const date = document.getElementById('tDate').value;
      const location = document.getElementById('tLocation').value.trim();
      const fee = Number(document.getElementById('tFee').value) || 0;
      const tournaments = getTournaments();
      const id = Date.now();
      tournaments.push({ id, name, game, date, location, fee, ownerId: currentUser.id });
      setTournaments(tournaments);
      alert('Tournament published!');
      createForm.reset();
      renderTournaments();
      renderOrganizerDashboard();
    });

    /* ---------- Organizer Dashboard rendering ---------- */
    function renderOrganizerDashboard(){
      if(!currentUser || (currentUser.type!=='organizer' && currentUser.type!=='admin')){ showPage('home'); return; }
      document.getElementById('orgWelcome').innerText = `Hello ${currentUser.name} ‚Äî publish tournaments and manage them here`;
      const tournaments = getTournaments().filter(t => t.ownerId === currentUser.id || currentUser.type==='admin');
      const list = document.getElementById('organizerTournamentsList');
      if(tournaments.length===0) list.innerHTML = `<div class="card">You haven't published any tournaments yet.</div>`;
      else list.innerHTML = tournaments.map(t => `<div class="card" style="margin-bottom:8px"><strong>${escapeHtml(t.name)}</strong><p class="muted">${t.date} ‚Ä¢ ${escapeHtml(t.location)}</p>
        <div style="display:flex;gap:8px"><button class="btn btn-outline" onclick="deleteTournament(${t.id})">Delete</button>
        <button class="btn" onclick="viewParticipants(${t.id})">View Participants</button></div></div>`).join('');
    }
    window.deleteTournament = function(id){
      if(!confirm('Delete this tournament?')) return;
      const ts = getTournaments().filter(t => t.id !== id);
      setTournaments(ts);
      // remove registrations
      const regs = getRegs().filter(r => r.tid !== id);
      setRegs(regs);
      renderTournaments(); renderOrganizerDashboard();
    };

    /* ---------- Player Dashboard ---------- */
    function renderPlayerDashboard(){
      if(!currentUser || currentUser.type!=='player'){ showPage('home'); return; }
      document.getElementById('playerWelcome').innerText = `Welcome ${currentUser.name}. Browse tournaments below and register.`;
      // show tournaments
      const tournaments = getTournaments();
      const regs = getRegs();
      const div = document.getElementById('playerTourneyList');
      if(tournaments.length===0) div.innerHTML = `<div class="card">No tournaments published yet.</div>`;
      else div.innerHTML = tournaments.map(t => {
        const registered = regs.some(r => r.tid===t.id && r.userId===currentUser.id);
        return `<div class="card" style="margin-bottom:8px"><strong>${escapeHtml(t.name)}</strong><p class="muted">${t.date} ‚Ä¢ ${escapeHtml(t.location)} ‚Ä¢ ‚Çπ${t.fee}</p>
          <div style="display:flex;gap:8px;margin-top:8px">
            ${registered ? '<button class="btn btn-outline" disabled>Registered</button>' : `<button class="btn btn-primary" onclick="registerFor(${t.id})">Register</button>`}
            <button class="btn" onclick="downloadCert(${t.id})">Certificate</button>
          </div></div>`;
      }).join('');

      // show certificates (registered)
      const playerCerts = regs.filter(r => r.userId === currentUser.id).map(r => {
        const t = getTournaments().find(tt => tt.id===r.tid);
        return `<div class="card" style="margin-bottom:8px"><strong>${escapeHtml(t.name)}</strong><p class="muted">${t.date}</p><div style="display:flex;gap:8px"><button class="btn" onclick="downloadCert(${t.id})">Download Cert</button></div></div>`;
      });
      document.getElementById('playerCerts').innerHTML = `<h3>Your Registrations</h3>` + (playerCerts.length ? playerCerts.join('') : `<div class="card">You have not registered for any tournaments.</div>`);
    }

    /* ---------- Contact form ---------- */
    document.getElementById('contactForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      alert('Message received ‚Äî we will contact you at ' + document.getElementById('contactEmail').value);
      e.target.reset();
    });

    /* ---------- Render tournaments initially ---------- */
    (function initDemo(){
      // Seed with basic tournament if none
      if(getTournaments().length === 0){
        setTournaments([
          { id: 101, name: 'Cricket Championship', game: 'Cricket', date: '2025-11-30', location: 'Stadium Plaza', fee: 30, ownerId: 0 },
          { id: 102, name: 'Football Tournament', game: 'Football', date: '2025-12-15', location: 'City Arena', fee: 25, ownerId: 0 },
          { id: 103, name: 'Basketball Showdown', game: 'Basketball', date: '2025-12-05', location: 'Sports Complex', fee: 20, ownerId: 0 }
        ]);
      }
      // See admin user if none
      const users = getUsers();
      if(!users.some(u => u.type==='admin')){
        users.push({ id: 9999, name:'Admin', email:'admin@playground.com', pass:'admin123', type:'admin' });
        setUsers(users);
      }
      renderTournaments();
      if(currentUser){
        if(currentUser.type==='player') showPage('playerDashboard');
        else showPage(currentUser.type==='organizer' || currentUser.type==='admin' ? 'organizerDashboard' : 'home');
      } else {
        showPage('home');
      }
    })();

    /* ---------- Small helpers: Refresh render when user logs in via other tabs ---------- */
    window.addEventListener('storage', ()=>{
      renderTournaments();
      renderPlayerDashboard();
      renderOrganizerDashboard();
    });

    // rudimentary mobile nav toggle
    document.getElementById('hamb').addEventListener('click', ()=>{
      const nav = document.querySelector('nav ul');
      nav.style.display = nav.style.display === 'flex' ? 'none' : 'flex';
    });

    // quick functions to refresh UI
    document.getElementById('orgRefresh').addEventListener('click', renderOrganizerDashboard);
    document.getElementById('btnCreateTournament').addEventListener('click', ()=>{
      if(!currentUser){ openModal('login'); return; }
      if(currentUser.type==='organizer' || currentUser.type==='admin') showPage('organizerDashboard'); else alert('Only organizers can create tournaments.');
    });

  </script>
</body>
</html>
